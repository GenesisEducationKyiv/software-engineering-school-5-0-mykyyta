# Weather API Monitoring Alerts

–¶–µ–π –¥–æ–∫—É–º–µ–Ω—Ç –æ–ø–∏—Å—É—î –∫–ª—é—á–æ–≤—ñ –º–µ—Ç—Ä–∏–∫–∏ —Ç–∞ –∞–ª–µ—Ä—Ç–∏ –¥–ª—è –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥—É Weather API –º—ñ–∫—Ä–æ—Å–µ—Ä–≤—ñ—Å—ñ–≤, –∑–≥—Ä—É–ø–æ–≤–∞–Ω—ñ –∑–∞ –∫–∞—Ç–µ–≥–æ—Ä—ñ—è–º–∏ –¥–ª—è –∑–∞–±–µ–∑–ø–µ—á–µ–Ω–Ω—è –Ω–∞–¥—ñ–π–Ω–æ—Å—Ç—ñ —Ç–∞ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ —Å–∏—Å—Ç–µ–º–∏.

## üìã –û–≥–ª—è–¥ –∫–∞—Ç–µ–≥–æ—Ä—ñ–π –∞–ª–µ—Ä—Ç—ñ–≤

–°–∏—Å—Ç–µ–º–∞ –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥—É –≤–∫–ª—é—á–∞—î 5 –æ—Å–Ω–æ–≤–Ω–∏—Ö –∫–∞—Ç–µ–≥–æ—Ä—ñ–π –∞–ª–µ—Ä—Ç—ñ–≤:
- üöÄ **Performance Alerts** - –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å API
- üîê **Security Alerts** - –±–µ–∑–ø–µ–∫–∞ —Å–∏—Å—Ç–µ–º–∏  
- üìä **Quota and Usage Alerts** - –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è —Ä–µ—Å—É—Ä—Å—ñ–≤ —Ç–∞ –∫–≤–æ—Ç
- ‚öôÔ∏è **Functional Alerts** - —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω—ñ –ø—Ä–æ–±–ª–µ–º–∏
- üñ•Ô∏è **System Health Alerts** - –∑–¥–æ—Ä–æ–≤'—è —ñ–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∏
- üìß **Email Dispatch Alerts** - —Å—Ç–∞–Ω –≤—ñ–¥–ø—Ä–∞–≤–∫–∏ email-–ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å

---

## üöÄ Performance Alerts

### 1. High P95 Latency

**–£–º–æ–≤–∞:** `histogram_quantile(0.95, rate(http_request_duration_seconds_bucket[5m]))` > 1 —Å–µ–∫ –ø—Ä–æ—Ç—è–≥–æ–º 2 —Ö–≤–∏–ª–∏–Ω.

**–û–ø–∏—Å —É–º–æ–≤–∏:** –≤–∏—Ä–∞—Ö–æ–≤—É—î 95-–π –ø–µ—Ä—Å–µ–Ω—Ç–∏–ª—å —á–∞—Å—É –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ –∑–∞ –æ—Å—Ç–∞–Ω–Ω—ñ 5 —Ö–≤–∏–ª–∏–Ω. –Ø–∫—â–æ —Ü–µ–π –ø–æ–∫–∞–∑–Ω–∏–∫ –ø–µ—Ä–µ–≤–∏—â—É—î 1 —Å–µ–∫—É–Ω–¥—É –ø—Ä–æ—Ç—è–≥–æ–º 2 —Ö–≤–∏–ª–∏–Ω –ø—ñ–¥—Ä—è–¥, —Å–ø—Ä–∞—Ü—å–æ–≤—É—î –∞–ª–µ—Ä—Ç.

**–ù–∞–≤—ñ—â–æ:** –ø–æ–∫–∞–∑—É—î, —â–æ 5% –Ω–∞–π–ø–æ–≤—ñ–ª—å–Ω—ñ—à–∏—Ö –∑–∞–ø–∏—Ç—ñ–≤ –≤–∏—Ö–æ–¥—è—Ç—å –∑–∞ –º–µ–∂—ñ –°LA.

---

### 2. Throughput Drop

**–£–º–æ–≤–∞:** `rate(http_requests_total[5m]) < 0.5 * rate(http_requests_total offset 24h[5m])`

**–û–ø–∏—Å —É–º–æ–≤–∏:** –ø–æ—Ä—ñ–≤–Ω—é—î –ø–æ—Ç–æ—á–Ω–∏–π RPS –∑–∞ –æ—Å—Ç–∞–Ω–Ω—ñ 5 —Ö–≤–∏–ª–∏–Ω —ñ–∑ —Ç–∏–º —Å–∞–º–∏–º 5-—Ö–≤–∏–ª–∏–Ω–Ω–∏–º –≤—ñ–∫–Ω–æ–º —Ä—ñ–≤–Ω–æ –¥–æ–±—É —Ç–æ–º—É. –ê–ª–µ—Ä—Ç –ø—ñ–¥–Ω—ñ–º–∞—î—Ç—å—Å—è, –∫–æ–ª–∏ –ø–∞–¥—ñ–Ω–Ω—è –ø–µ—Ä–µ–≤–∏—â—É—î 50 %.

**–ù–∞–≤—ñ—â–æ:** —Ä—ñ–∑–∫–µ –∑–Ω–∏–∂–µ–Ω–Ω—è —Ç—Ä–∞—Ñ—ñ–∫—É –º–æ–∂–µ –≤–∫–∞–∑—É–≤–∞—Ç–∏ –Ω–∞ –ø—Ä–æ–±–ª–µ–º–∏ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—ñ API (–º–µ—Ä–µ–∂–∞, DNS, –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—è) –∞–±–æ –≤—Ç—Ä–∞—Ç—É –∫–ª—ñ—î–Ω—Ç—Å—å–∫–æ–≥–æ —Ç—Ä–∞—Ñ—ñ–∫—É.

---

## üîê Security Alerts

### 1. Possible Brute-Force Auth

**–£–º–æ–≤–∞:** `increase(http_requests_total{status="401"}[5m]) > 100`

**–û–ø–∏—Å —É–º–æ–≤–∏:** –∑–∞ 5 —Ö–≤–∏–ª–∏–Ω –Ω–∞–∑–±–∏—Ä–∞–ª–æ—Å—è > 100 –∑–∞–ø–∏—Ç—ñ–≤ —ñ–∑ –∫–æ–¥–æ–º 401.

**–ù–∞–≤—ñ—â–æ:** –≤–µ–ª–∏–∫–∞ –∫—ñ–ª—å–∫—ñ—Å—Ç—å –Ω–µ–≤–¥–∞–ª–∏—Ö –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ–π –º–æ–∂–µ –æ–∑–Ω–∞—á–∞—Ç–∏ brute-force –∞–±–æ –∑–ª–∞–º–∞–Ω–∏–π –∫–ª—ñ—î–Ω—Ç.

---

### 2. Potential DDoS (Single IP Spike)

**–£–º–æ–≤–∞:** `max by (client_ip) (rate(http_requests_total[1m])) > 1000`

**–û–ø–∏—Å —É–º–æ–≤–∏:** –∑–∞ —Ö–≤–∏–ª–∏–Ω—É –∑ –æ–¥–Ω—ñ—î—ó IP –Ω–∞–¥—Ö–æ–¥–∏—Ç—å > 1000 –∑–∞–ø–∏—Ç—ñ–≤.

**–ù–∞–≤—ñ—â–æ:** –∞–Ω–æ–º–∞–ª—å–Ω–æ –≤–∏—Å–æ–∫–∞ —á–∞—Å—Ç–æ—Ç–∞ –∑ –æ–¥–Ω—ñ—î—ó –∞–¥—Ä–µ—Å–∏ –≤–∫–∞–∑—É—î –Ω–∞ –º–æ–∂–ª–∏–≤–∏–π (D)DoS –∞–±–æ –∑–∞—Ü–∏–∫–ª–µ–Ω–∏–π –∫–ª—ñ—î–Ω—Ç.

---

## üìà Quota & Usage Alerts

### 1. Monthly Quota 80% Used

**–£–º–æ–≤–∞:** `(api_calls_month_total / clamp_min(api_calls_month_quota, 1)) > 0.8` for: 5m

**–û–ø–∏—Å —É–º–æ–≤–∏:** –ø–æ—Ä—ñ–≤–Ω—é—î –ø–æ—Ç–æ—á–Ω–µ –º—ñ—Å—è—á–Ω–µ —Å–ø–æ–∂–∏–≤–∞–Ω–Ω—è –∑ –ª—ñ–º—ñ—Ç–æ–º; —Ç—Ä–∏–≥–µ—Ä, —è–∫—â–æ –ø–µ—Ä–µ–≤–∏—â–µ–Ω–æ 80 % –ø—Ä–æ—Ç—è–≥–æ–º ‚â• 5 —Ö–≤.

**–ù–∞–≤—ñ—â–æ:** –¥–∞—î —á–∞—Å –∑–±—ñ–ª—å—à–∏—Ç–∏ –ª—ñ–º—ñ—Ç –∞–±–æ –ø–æ–ø–µ—Ä–µ–¥–∏—Ç–∏ –∫–ª—ñ—î–Ω—Ç—ñ–≤, –ø–µ—Ä—à –Ω—ñ–∂ API —Å—Ç–∞–Ω–µ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∏–º.

---

### 2. Burst Rate-Limit Approaching

**–£–º–æ–≤–∞:** `sum(rate(http_requests_total[1m])) > 0.9 * burst_limit` for: 2m

**–û–ø–∏—Å —É–º–æ–≤–∏:** –∞–≥—Ä–µ–≥—É—î RPS –∑–∞ –æ—Å—Ç–∞–Ω–Ω—é —Ö–≤–∏–ª–∏–Ω—É –π —Å–ø—Ä–∞—Ü—å–æ–≤—É—î, –∫–æ–ª–∏ —Ç—Ä–∞—Ñ—ñ–∫ –ø–µ—Ä–µ–≤–∏—â—É—î 90 % burst-–ª—ñ–º—ñ—Ç—É —è–∫ –º—ñ–Ω—ñ–º—É–º 2 —Ö–≤.

**–ù–∞–≤—ñ—â–æ:** –ø–æ–ø–µ—Ä–µ–¥–∂–∞—î –¥–æ —Ç–æ–≥–æ, —è–∫ –∫–ª—ñ—î–Ω—Ç–∏ –º–∞—Å–æ–≤–æ –ø–æ—á–Ω—É—Ç—å –æ—Ç—Ä–∏–º—É–≤–∞—Ç–∏ 429

---

## üõ† Functional Alerts

### 1. High 5xx Error Rate

**–£–º–æ–≤–∞:** `sum(rate(http_requests_total{status=~"5.."}[5m]))/clamp_min(sum(rate(http_requests_total[5m])), 1) > 0.05` for: 2m

**–û–ø–∏—Å —É–º–æ–≤–∏:** —á–∞—Å—Ç–∫–∞ —Å–µ—Ä–≤–µ—Ä–Ω–∏—Ö –ø–æ–º–∏–ª–æ–∫ (5xx) –ø–µ—Ä–µ–≤–∏—â—É—î 5 % —â–æ–Ω–∞–π–º–µ–Ω—à–µ 2 —Ö–≤–∏–ª–∏–Ω–∏.

**–ù–∞–≤—ñ—â–æ:** –ø—ñ–¥–≤–∏—â–µ–Ω–∏–π —Ä—ñ–≤–µ–Ω—å 5xx –ø—Ä—è–º–æ –≤–ø–ª–∏–≤–∞—î –Ω–∞ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—Ü—å–∫–∏–π –¥–æ—Å–≤—ñ–¥ —ñ –º–æ–∂–µ —Å–≤—ñ–¥—á–∏—Ç–∏ –ø—Ä–æ –¥–µ–≥—Ä–∞–¥–∞—Ü—ñ—é —Å–µ—Ä–≤—ñ—Å—É.

---

### 2. Empty Payload Ratio

**–£–º–æ–≤–∞:** `sum(rate(weather_empty_response_total[5m]))/clamp_min(sum(rate(http_requests_total[5m])), 1) > 0.005` for: 5m

**–û–ø–∏—Å —É–º–æ–≤–∏:** –ø–æ–Ω–∞–¥ 0,5 % –≤—ñ–¥–ø–æ–≤—ñ–¥–µ–π –ø–æ–≤–µ—Ä—Ç–∞—é—Ç—å—Å—è –±–µ–∑ –¥–∞–Ω–∏—Ö (–ø–æ—Ä–æ–∂–Ω—ñ–π –∞–±–æ –Ω–µ–ø–æ–≤–Ω–∏–π payload) –ø—Ä–æ—Ç—è–≥–æ–º 5 —Ö–≤–∏–ª–∏–Ω.

**–ù–∞–≤—ñ—â–æ:** API —Ç–µ—Ö–Ω—ñ—á–Ω–æ ¬´–¥–æ—Å—Ç—É–ø–Ω–µ¬ª, –∞–ª–µ –∫–ª—ñ—î–Ω—Ç–∏ –æ—Ç—Ä–∏–º—É—é—Ç—å –Ω–µ–∫–æ—Ä–µ–∫—Ç–Ω–∏–π –∫–æ–Ω—Ç–µ–Ω—Ç ‚Äî –±—ñ–∑–Ω–µ—Å-–∫—Ä–∏—Ç–∏—á–Ω–∞ –ø–æ–º–∏–ª–∫–∞.

---

## üñ• System Health Alerts

### 1. High CPU Usage

**–£–º–æ–≤–∞:** `avg(node_cpu_seconds_total{mode="idle"}[5m]) < 0.1` (—Ç–æ–±—Ç–æ > 90% busy) –ø—Ä–æ—Ç—è–≥–æ–º 10 —Ö–≤–∏–ª–∏–Ω.

**–û–ø–∏—Å —É–º–æ–≤–∏:** –í–∏—Ä–∞—Ö–æ–≤—É—î —Å–µ—Ä–µ–¥–Ω—ñ–π —á–∞—Å –ø—Ä–æ—Å—Ç–æ—é CPU –∑–∞ 5 —Ö–≤–∏–ª–∏–Ω. –Ø–∫—â–æ idle —á–∞—Å –º–µ–Ω—à–µ 10% (—Ç–æ–±—Ç–æ –Ω–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è >90%), —Å–ø—Ä–∞—Ü—å–æ–≤—É—î –∞–ª–µ—Ä—Ç.

**–ù–∞–≤—ñ—â–æ:** –¥–æ–≤–≥–æ—Ç—Ä–∏–≤–∞–ª–∞ CPU-–Ω–∞—Å–∏—á–µ–Ω—ñ—Å—Ç—å –º–æ–∂–µ —Å–ø—Ä–∏—á–∏–Ω–∏—Ç–∏ —Ç–∞–π–º–∞—É—Ç–∏, queue backlog —ñ –∑–Ω–∏–∂–µ–Ω–Ω—è –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ.

---

### 2. Memory Pressure / OOM Restarts

**–£–º–æ–≤–∞:**
- `container_memory_usage_bytes / container_spec_memory_limit_bytes > 0.9` –∞–±–æ
- `increase(container_oom_events_total[1h]) > 0`

**–û–ø–∏—Å —É–º–æ–≤–∏:** –ü–µ—Ä—à–∞ —á–∞—Å—Ç–∏–Ω–∞ –ø–µ—Ä–µ–≤—ñ—Ä—è—î –≤—ñ–¥–Ω–æ—à–µ–Ω–Ω—è –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–æ—ó –ø–∞–º'—è—Ç—ñ –¥–æ –ª—ñ–º—ñ—Ç—É –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ (>90%). –î—Ä—É–≥–∞ —á–∞—Å—Ç–∏–Ω–∞ –≤—ñ–¥—Å—Ç–µ–∂—É—î –∑–±—ñ–ª—å—à–µ–Ω–Ω—è –∫—ñ–ª—å–∫–æ—Å—Ç—ñ OOM –ø–æ–¥—ñ–π –∑–∞ –æ—Å—Ç–∞–Ω–Ω—é –≥–æ–¥–∏–Ω—É.

**–ù–∞–≤—ñ—â–æ:** —Ä–∞–Ω–Ω—ñ–π —Å–∏–≥–Ω–∞–ª, —â–æ —Å–µ—Ä–≤—ñ—Å —Å–∫–æ—Ä–æ –≤–ø–∞–¥–µ –∞–±–æ –≤–∂–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞—î—Ç—å—Å—è.

---

## üìß Email Dispatch Alerts

### 1. High Queue Lag

**–£–º–æ–≤–∞:** `histogram_quantile(0.95,rate(email_queue_latency_seconds_bucket[5m])) > 60` for: 5m.

**–û–ø–∏—Å —É–º–æ–≤–∏:** 95-–π –ø–µ—Ä—Ü–µ–Ω—Ç–∏–ª—å —á–∞—Å—É –æ—á—ñ–∫—É–≤–∞–Ω–Ω—è –∑–∞–¥–∞—á—ñ –≤ —á–µ—Ä–∑—ñ –ø–µ—Ä–µ–≤–∏—â—É—î 60 —Å–µ–∫ —É–ø—Ä–æ–¥–æ–≤–∂ 5 —Ö–≤.

**–ù–∞–≤—ñ—â–æ:** –∑—Ä–æ—Å—Ç–∞–Ω–Ω—è –∑–∞—Ç—Ä–∏–º–∫–∏ —Å–∏–≥–Ω–∞–ª—ñ–∑—É—î, —â–æ –≤–æ—Ä–∫–µ—Ä–∏ –Ω–µ –≤—Å—Ç–∏–≥–∞—é—Ç—å –æ–±—Ä–æ–±–ª—è—Ç–∏ –ª–∏—Å—Ç–∏ ‚Äî –º–æ–∂–ª–∏–≤—ñ –∑–∞—Ç–æ—Ä–∏ –≤ —á–µ—Ä–∑—ñ, –ø—Ä–æ–±–ª–µ–º–∏ –∑ email-—Å–µ—Ä–≤—ñ—Å–æ–º –∞–±–æ –Ω–µ–¥–æ—Å—Ç–∞—Ç–Ω—è –∫—ñ–ª—å–∫—ñ—Å—Ç—å —ñ–Ω—Å—Ç–∞–Ω—Å—ñ–≤.


---

### 2. Low Send Success Ratio

**–£–º–æ–≤–∞:**
- `rate(email_send_success_total[5m])/clamp_min(rate(email_send_attempt_total[5m]), 1) < 0.95`

**–û–ø–∏—Å —É–º–æ–≤–∏:** —á–∞—Å—Ç–∫–∞ —É—Å–ø—ñ—à–Ω–æ –Ω–∞–¥—ñ—Å–ª–∞–Ω–∏—Ö –ª–∏—Å—Ç—ñ–≤ –ø–∞–¥–∞—î –Ω–∏–∂—á–µ 95 % –ø—Ä–æ—Ç—è–≥–æ–º —â–æ–Ω–∞–π–º–µ–Ω—à–µ 2 —Ö–≤.

**–ù–∞–≤—ñ—â–æ:** –≤–∫–∞–∑—É—î –Ω–∞ –∑–±–æ—ó SMTP/API –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞, –±–ª–æ–∫—É–≤–∞–Ω–Ω—è –¥–æ–º–µ–Ω—É —á–∏ –≤–∏—Å–æ–∫—É —á–∞—Å—Ç–∫—É bounce-—ñ–≤; –∫—Ä–∏—Ç–∏—á–Ω–æ –¥–ª—è –¥–æ—Å—Ç–∞–≤–∫–∏ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞–º.